(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{389:function(e,t,n){"use strict";n.d(t,"a",(function(){return be}));var a,r=n(13),o=n.n(r),l=n(0),c=n.n(l),i=n(249),u=n(348),m=n(656),s=n(657),d=n(18),f=n.n(d),E=n(80),g=n(79),p=n(63),y=n(10),b=n(78),h=n(6),v=n(175),S=n(28),x=function(e){var t=e.showPoundSign,n=e.text,a=e.onPressCallback,r=void 0===a?function(){}:a;return c.a.createElement(h.a,null,c.a.createElement(S.a,{onPress:r},t?"#"+n:n))},T=function(e){var t=e.item,n=e.onPress,a=e.style,r=e.showPoundSign;return c.a.createElement(b.a,{onPress:n,style:[k.item,a]},c.a.createElement(x,o()({style:k.title},t,{showPoundSign:r})))},C=function(e){var t=e.hashtagList,n=e.showPoundSign,a=e.onSelectionCallBack,r=void 0===a?function(e){}:a,o=Object(l.useState)(null),i=f()(o,2),u=i[0],m=i[1];return 0===(null==t?void 0:t.length)?c.a.createElement(c.a.Fragment,null):c.a.createElement(g.a,null,c.a.createElement(E.a,{style:k.list,horizontal:!0,data:t,renderItem:function(e){var t=e.item,a=t.id===u?"#E83468":"#FFFFFF";return c.a.createElement(T,{showPoundSign:n,item:t,onPress:function(){m(t.id),r(t)},style:{borderBottomWidth:"thick",borderBottomColor:a,backgroundColor:"#FFFFFF"}})},keyExtractor:function(e){return null==e?void 0:e.id},extraData:u}))},k=y.a.create({list:{height:50,flexGrow:0},item:{padding:20},title:{fontSize:16}});!function(e){e[e.Like=0]="Like",e[e.Dislike=1]="Dislike"}(a||(a={}));var w=n(658),L=function(e){var t=e.initialCount,n=e.feedbackType,r=Object(l.useState)(0),o=f()(r,2),i=o[0],u=o[1];return Object(l.useEffect)((function(){u(t)}),[t]),c.a.createElement(h.a,{style:O.feedbackButton},c.a.createElement(w.a.Button,{name:n===a.Like?"thumbs-up":"thumbs-down",backgroundColor:"#FFFFFF",onPress:function(){return u(i+1)},size:24,color:"black"}),c.a.createElement(h.a,{style:O.count},i))},O=y.a.create({feedbackButton:{margin:10,padding:10,display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",borderColor:"#C4C4C4",borderWidth:3,borderRadius:50},count:{margin:10}}),I=n(251),P=n.n(I),R=n(72);function A(){var e=P()(["\n  query Memes_By_Tag($tag: String!) {\n    memesByTag(tag: $tag) {\n      id\n      author {\n        id\n        name\n      }\n      tags\n      url\n      createTime\n      counter {\n        likeCount\n        dislikeCount\n      }\n    }\n  }\n"]);return A=function(){return e},e}function B(){var e=P()(["\n  query Popular_Tags {\n    popularTags\n  }\n"]);return B=function(){return e},e}var j=Object(R.gql)(B()),D=Object(R.gql)(A()),F=n(64),N=n(654),H=function(e){e.id;var t=e.imageUrl,n=e.name;return c.a.createElement(h.a,{style:z.user},t?c.a.createElement(F.a,{source:{uri:t}}):c.a.createElement(N.a,{name:"user",size:36,color:"black"}),c.a.createElement(S.a,{style:z.name},n))},z=y.a.create({user:{display:"flex",flexDirection:"row",flex:1,margin:5},name:{margin:5,display:"flex",alignItems:"center"}}),U=n(526),W=function(e){var t=e.creationTime,n=e.discussionCount,a=e.shareCount,r=t?new Date(t):new Date,o=Object(l.useState)(0),i=f()(o,2),u=i[0],m=i[1],s=Object(l.useState)(0),d=f()(s,2),E=d[0],g=d[1];return Object(l.useEffect)((function(){n&&m(n),a&&g(a)}),[n,a]),c.a.createElement(h.a,{style:M.container},c.a.createElement(h.a,{style:M.date},c.a.createElement(S.a,null,r.toLocaleString())),c.a.createElement(h.a,{style:M.number},c.a.createElement(S.a,null," "+u+" "+(u>1?U("Discussion"):"Discussion")+" "),c.a.createElement(S.a,null," "+E+" "+(E>1?U("Share"):"Share")+" ")))},M=y.a.create({container:{display:"flex",flexDirection:"column"},date:{display:"flex",flexDirection:"row-reverse",flex:1},number:{display:"flex",flexDirection:"row-reverse",flex:1}}),G=function(e){e.imageUrl;return c.a.createElement(h.a,{style:V.container},c.a.createElement(N.a,{name:"picture",size:300,color:"black"}))},V=y.a.create({container:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"}}),q=function(e){var t,n,r,o,l,i,u,m,s,d=e.item,f=e.onPress;return c.a.createElement(b.a,{onPress:f,style:[Z.item,Z.background]},c.a.createElement(h.a,{style:Z.memeHeaderInfo},c.a.createElement(H,{id:null==d||null==(t=d.author)?void 0:t.id,name:null==d||null==(n=d.author)?void 0:n.name}),c.a.createElement(W,{creationTime:null!=(r=null==d?void 0:d.createTime)?r:""})),c.a.createElement(h.a,null,c.a.createElement(G,{imageUrl:null==d?void 0:d.url})),c.a.createElement(h.a,null,c.a.createElement(C,{hashtagList:null!=(o=null==d||null==(l=d.tags)?void 0:l.map((function(e){return{id:e,text:e}})))?o:[],showPoundSign:!1})),c.a.createElement(h.a,{style:Z.feedbackButton},c.a.createElement(L,{initialCount:null!=(i=null==d||null==(u=d.counter)?void 0:u.likeCount)?i:0,feedbackType:a.Like}),c.a.createElement(L,{initialCount:null!=(m=null==d||null==(s=d.counter)?void 0:s.dislikeCount)?m:0,feedbackType:a.Dislike})))};function Q(e){e.navigation;var t,n=Object(l.useState)(null),a=f()(n,2),r=a[0],o=a[1],i=Object(l.useState)(""),u=f()(i,2),m=u[0],s=u[1],d=Object(R.useQuery)(j),p=d.loading,y=d.data,b=Object(R.useQuery)(D,{skip:!(null==y?void 0:y.popularTags),variables:{tag:m}}),S=(b.loading,b.data),x=p?[]:y.popularTags.map((function(e){return{id:e,text:e}}));Object(l.useEffect)((function(){!m&&(null==x?void 0:x.length)>0&&s(x[0].text)}));return p?c.a.createElement(h.a,{style:[_.container,_.horizontal]},c.a.createElement(v.a,{size:"large"})):c.a.createElement(c.a.Fragment,null,c.a.createElement(C,{hashtagList:x,showPoundSign:!1,onSelectionCallBack:function(e){s(e.text)}}),c.a.createElement(g.a,{style:Z.container},c.a.createElement(E.a,{data:null!=(t=null==S?void 0:S.memesByTag)?t:[],renderItem:function(e){var t=e.item;return c.a.createElement(q,{item:t,onPress:function(){return o(t.id)}})},keyExtractor:function(e){return e.id},extraData:r})))}var Z=y.a.create({background:{backgroundColor:"#ffffff"},container:{flex:1,marginTop:p.a.currentHeight||0},item:{padding:20,marginVertical:1,marginHorizontal:0,display:"flex"},memeHeaderInfo:{display:"flex",flex:1,flexDirection:"row"},feedbackButton:{display:"flex",flex:1,flexDirection:"row"}}),_=y.a.create({container:{flex:1,justifyContent:"center"},horizontal:{flexDirection:"row",justifyContent:"space-around",padding:10}}),J=n(390),K=[{name:"TURQUOISE",code:"#1abc9c"},{name:"EMERALD",code:"#2ecc71"},{name:"PETER RIVER",code:"#3498db"},{name:"AMETHYST",code:"#9b59b6"},{name:"WET ASPHALT",code:"#34495e"},{name:"GREEN SEA",code:"#16a085"},{name:"NEPHRITIS",code:"#27ae60"},{name:"BELIZE HOLE",code:"#2980b9"},{name:"WISTERIA",code:"#8e44ad"},{name:"MIDNIGHT BLUE",code:"#2c3e50"},{name:"SUN FLOWER",code:"#f1c40f"},{name:"CARROT",code:"#e67e22"},{name:"ALIZARIN",code:"#e74c3c"},{name:"CLOUDS",code:"#ecf0f1"},{name:"CONCRETE",code:"#95a5a6"},{name:"ORANGE",code:"#f39c12"},{name:"PUMPKIN",code:"#d35400"},{name:"POMEGRANATE",code:"#c0392b"},{name:"SILVER",code:"#bdc3c7"},{name:"ASBESTOS",code:"#7f8c8d"},{name:"TURQUOISE",code:"#1abc9c"},{name:"EMERALD",code:"#2ecc71"},{name:"PETER RIVER",code:"#3498db"},{name:"AMETHYST",code:"#9b59b6"},{name:"WET ASPHALT",code:"#34495e"},{name:"GREEN SEA",code:"#16a085"},{name:"NEPHRITIS",code:"#27ae60"},{name:"BELIZE HOLE",code:"#2980b9"},{name:"WISTERIA",code:"#8e44ad"},{name:"MIDNIGHT BLUE",code:"#2c3e50"},{name:"SUN FLOWER",code:"#f1c40f"},{name:"CARROT",code:"#e67e22"},{name:"ALIZARIN",code:"#e74c3c"},{name:"CLOUDS",code:"#ecf0f1"},{name:"CONCRETE",code:"#95a5a6"},{name:"ORANGE",code:"#f39c12"},{name:"PUMPKIN",code:"#d35400"},{name:"POMEGRANATE",code:"#c0392b"},{name:"SILVER",code:"#bdc3c7"},{name:"ASBESTOS",code:"#7f8c8d"}];function X(e){e.navigation;var t=Object(l.useState)(null),n=f()(t,2),a=(n[0],n[1],!0),r="2020/07/14",o=1300,i=100,u="A";return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{style:Y.container},c.a.createElement(J.a,{itemDimension:100,data:K,style:Y.gridView,fixed:!0,spacing:16,renderItem:function(e){var t=e.item;return c.a.createElement(h.a,{style:[Y.itemContainer,{backgroundColor:t.code}]},c.a.createElement(S.a,{style:Y.itemName},t.name),c.a.createElement(S.a,{style:Y.itemCode},t.code))},ListHeaderComponent:function(){return c.a.createElement(h.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:24}},c.a.createElement(h.a,{style:{backgroundColor:"rgba(196, 196, 196, 0.8)",borderRadius:32,height:64,width:64,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(S.a,null,u)),c.a.createElement(h.a,{style:{marginLeft:8}},a?c.a.createElement(S.a,null,"\u69ae\u767b ",r," \u984c\u738b"):null,c.a.createElement(S.a,null,"\u7e3d\u7372\u5f97\u559c\u6b61 ",o," \u8a0e\u53ad ",i)))}})))}var Y=y.a.create({container:{flex:1,marginTop:p.a.currentHeight||0,backgroundColor:"#ffffff"},gridView:{marginTop:10,flex:1},itemContainer:{justifyContent:"flex-end",borderRadius:5,padding:10,height:100},itemName:{fontSize:16,color:"#fff",fontWeight:"600"},itemCode:{fontWeight:"600",fontSize:12,color:"#fff"}}),$=n(372),ee=n.n($),te=new R.ApolloClient({link:new R.HttpLink({uri:"https://memetalk.herokuapp.com/graphql",fetch:ee.a}),cache:new R.InMemoryCache}),ne=n(195),ae=n(21),re=n.n(ae),oe=n(15),le=n(256),ce=n(89),ie=n(213);function ue(){var e=Object(l.useState)(String),t=f()(e,2),n=t[0],a=t[1];Object(l.useEffect)((function(){!function(){var e;re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"===oe.a.OS){t.next=6;break}return t.next=3,re.a.awrap(le.b());case 3:e=t.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return t.stop()}}),null,null,null,Promise)}()}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{style:me.container},c.a.createElement(S.a,{style:me.title},"MEME"),c.a.createElement(S.a,{style:me.subTitle},"\u9078\u500b\u4e3b\u984c\u767c\u8072\u5427"),c.a.createElement(h.a,{style:me.uploadView},c.a.createElement(h.a,{style:me.uploadBtnLayout},c.a.createElement(ie.a,{style:me.uploadBtn,onPress:function(){var e;return re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.a.awrap(le.a({mediaTypes:ce.a.All,allowsEditing:!0,aspect:[4,3],quality:1}));case 2:e=t.sent,console.log(e),e.cancelled||a(null==e?void 0:e.uri);case 5:case"end":return t.stop()}}),null,null,null,Promise)}},c.a.createElement(S.a,{style:me.buttonText}," \u4e0a\u50b3\u5716\u7247\u767c\u5e03\u5fc3\u60c5 ")))),n?c.a.createElement(h.a,{style:me.imageDetail},c.a.createElement(h.a,{style:me.clearBtnLayout},c.a.createElement(ie.a,{style:me.clearBtn,onPress:function(){a("")}},c.a.createElement(S.a,{style:me.clearBtnText}," X "))),c.a.createElement(h.a,{style:me.inputLayout},c.a.createElement(ne.Input,{placeholder:"\u8f38\u5165\u6a19\u7c64"}),c.a.createElement(S.a,{style:me.tag},"#\u8077\u5834 \b#\u9738\u51cc #\u72d7 #\u8c93\u5974")),c.a.createElement(F.a,{source:{uri:n},style:me.previewImage}),c.a.createElement(h.a,{style:me.uploadBtnLayout},c.a.createElement(ie.a,{style:me.uploadBtn,onPress:function(){}},c.a.createElement(S.a,{style:me.buttonText}," \u9001\u51fa ")))):null))}var me=y.a.create({container:{flex:1,marginTop:p.a.currentHeight||0,backgroundColor:"#ffffff",position:"relative"},title:{textAlign:"center",fontSize:24,fontWeight:"700",fontStyle:"normal",lineHeight:28},subTitle:{marginTop:12,textAlign:"center",fontSize:14,fontWeight:"400",fontStyle:"normal",lineHeight:16},uploadView:{margin:20,borderStyle:"dashed",borderWidth:1,borderColor:"black",flex:1},uploadBtnLayout:{position:"absolute",left:"50%",top:"60%",transform:[{translateX:-75}]},uploadBtn:{width:150,backgroundColor:"#C4C4C4",padding:8},previewImage:{width:300,height:300,marginRight:"auto",marginLeft:"auto",marginTop:"10%",borderRadius:10},buttonText:{textAlign:"center"},imageDetail:{position:"absolute",height:"100vh",width:"100vw",left:0,top:0,backgroundColor:"#F0F0F0",marginTop:"10%"},clearBtnLayout:{position:"absolute",right:20,top:20},clearBtn:{width:"auto",height:"auto"},clearBtnText:{fontSize:20,textAlign:"center"},inputLayout:{width:"70%",marginTop:"10%",marginLeft:"auto",marginRight:"auto"},tag:{color:"#000000",opacity:.4,fontSize:14,lineHeight:17}}),se=Object(m.a)();function de(){return l.createElement(se.Navigator,null,l.createElement(se.Screen,{name:"Topic",component:Q}))}var fe=Object(m.a)();function Ee(){return l.createElement(fe.Navigator,null,l.createElement(fe.Screen,{name:"Profile",component:X}))}var ge=Object(m.a)();function pe(){return l.createElement(ge.Navigator,null,l.createElement(ge.Screen,{name:"Compose",component:ue}))}var ye=Object(s.a)();function be(){return l.createElement(ne.ApplicationProvider,o()({},i,{theme:i.light}),l.createElement(R.ApolloProvider,{client:te},l.createElement(u.a,null,l.createElement(ye.Navigator,null,l.createElement(ye.Screen,{name:"Topic",component:de}),l.createElement(ye.Screen,{name:"Profile",component:Ee}),l.createElement(ye.Screen,{name:"Compose",component:pe})))))}},397:function(e,t,n){n(398),e.exports=n(642)},398:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[397,1,2]]]);
//# sourceMappingURL=app.75976b4a.chunk.js.map