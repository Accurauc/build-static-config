(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{203:function(e,t,n){e.exports=n.p+"static/media/logo.92e270c4.png"},326:function(e,t,n){"use strict";n.d(t,"a",(function(){return et}));var a=n(13),r=n.n(a),o=n(0),l=n.n(o),i=n(206),c=n(287),u=n.n(c),s=n(40),m={graphQLEndPoint:"https://metu-api.herokuapp.com/graphql"},d=new s.ApolloClient({link:new s.HttpLink({uri:m.graphQLEndPoint,fetch:u.a}),cache:new s.InMemoryCache}),f=n(162),g=n(286),p=n(487),h=n(18),y=n.n(h),b=n(11),E=n.n(b),w=n(16),v=n.n(w),x=n(15),C=n(483),S=n(210),k=n.n(S),O=function(e,t){return"web"===x.a.OS?k.a.setItem(e,t):C.a.setItemAsync(e,t)};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=o.createContext({}),P=o.createContext({}),A=o.createContext({}),B=function(e){var t=e.children,n=o.useReducer((function(e,t){switch(t.type){case"RESTORE_TOKEN":return T(T({},e),{},{userToken:t.token,isLoading:!1});case"SIGN_IN":return T(T({},e),{},{isSignout:!1,userToken:t.token});case"SIGN_OUT":return T(T({},e),{},{isSignout:!0,userToken:null});default:throw new Error("Unhandled action type: "+t.type)}}),{isLoading:!0,isSignout:!1,userToken:null}),a=v()(n,2),r=a[0],l=a[1],i=o.useMemo((function(){return{signIn:function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:l({type:"SIGN_IN",token:null!=(t=null==e?void 0:e.token)?t:null});case 1:case"end":return n.stop()}}),null,null,null,Promise)},signOut:function(){return l({type:"SIGN_OUT"})},signUp:function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:l({type:"SIGN_IN",token:null!=(t=null==e?void 0:e.token)?t:null});case 1:case"end":return n.stop()}}),null,null,null,Promise)}}}),[]);return Object(o.useEffect)((function(){return function(){var e,t,n;y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.a.awrap((r="userToken","web"===x.a.OS?k.a.getItem(r):C.a.getItemAsync(r)));case 3:e=a.sent,l({type:"RESTORE_TOKEN",token:null!=(t=null==(n=e)?void 0:n.token)?t:null}),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}var r}),null,null,[[0,7]],Promise)}(),function(){}}),[]),o.createElement(I.Provider,{value:r},o.createElement(P.Provider,{value:l},o.createElement(A.Provider,{value:i},t)))},F=n(488),D=n(45),z=n(71),L=n(61),V=n(6),N=n(24),U=n(2),R=n(213),W=n(82),$=n(186),q=function(){var e=Object(o.useState)(""),t=v()(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),i=v()(r,2),c=i[0],u=i[1],s=l.a.useContext(I);Object(o.useEffect)((function(){!function(){var e;y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"===x.a.OS){t.next=6;break}return t.next=3,y.a.awrap(R.b());case 3:e=t.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return t.stop()}}),null,null,null,Promise)}()}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{style:_.container},l.a.createElement(N.a,{style:_.title},"MEME"),l.a.createElement(N.a,{style:_.subTitle},"\u9078\u500b\u4e3b\u984c\u767c\u8072\u5427"),l.a.createElement(U.a,{style:_.uploadView},l.a.createElement(U.a,{style:_.uploadBtnLayout},l.a.createElement($.a,{style:_.uploadBtn,onPress:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(R.a({mediaTypes:W.a.Images,allowsEditing:!0,aspect:[4,3],quality:1}));case 2:(e=t.sent).cancelled||a(null==e?void 0:e.uri);case 4:case"end":return t.stop()}}),null,null,null,Promise)}},l.a.createElement(N.a,{style:_.buttonText}," \u4e0a\u50b3\u5716\u7247\u767c\u5e03\u5fc3\u60c5 ")))),n?l.a.createElement(U.a,{style:_.imageDetail},l.a.createElement(U.a,{style:_.clearBtnLayout},l.a.createElement($.a,{style:_.clearBtn,onPress:function(){a("")}},l.a.createElement(N.a,{style:_.clearBtnText}," X "))),l.a.createElement(U.a,{style:_.inputLayout},l.a.createElement(f.Input,{placeholder:"\u8f38\u5165\u6a19\u7c64",onChangeText:function(e){u(e)}}),l.a.createElement(N.a,{style:_.tag},"#\u8077\u5834 \b#\u9738\u51cc #\u72d7 #\u8c93\u5974")),l.a.createElement(D.a,{source:{uri:n},style:_.previewImage}),l.a.createElement(U.a,{style:_.uploadBtnLayout},l.a.createElement($.a,{style:_.uploadBtn,onPress:function(){var e=c.replace(" ","").split("#").filter((function(e){return""!==e})),t=function(e){for(var t=e.split(","),n=t[0].indexOf("base64")>=0?atob(t[1]):decodeURI(t[1]),a=t[0].split(":")[1].split(";")[0],r=new Uint8Array(n.length),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return new Blob([r],{type:a})}(n),r=new FormData;r.append("operations",'{ "query": "mutation ($file: File!, $tags: [String!]) { createMeme(file: $file, tags: $tags) { tags } }", "variables": { "file": null, "tags": '+JSON.stringify(e)+" } }"),r.append("map",'{ "0": ["variables.file"] }'),r.append("file",t,"meme.png"),fetch(""+m.graphQLEndPoint,{method:"POST",body:r,headers:{Authorization:"Bearer "+s.userToken}}).then((function(e){return e.json()})).then((function(e){a(""),u("")})).catch((function(e){}))}},l.a.createElement(N.a,{style:_.buttonText}," \u9001\u51fa ")))):null))},_=V.a.create({container:{flex:1,marginTop:L.a.currentHeight||0,backgroundColor:"#ffffff",position:"relative"},title:{textAlign:"center",fontSize:24,fontWeight:"700",fontStyle:"normal",lineHeight:28},subTitle:{marginTop:12,textAlign:"center",fontSize:14,fontWeight:"400",fontStyle:"normal",lineHeight:16},uploadView:{margin:20,borderStyle:"dashed",borderWidth:1,borderColor:"black",flex:1},uploadBtnLayout:{position:"absolute",left:"50%",top:"60%",transform:[{translateX:-75}]},uploadBtn:{width:150,backgroundColor:"#C4C4C4",padding:8},previewImage:{width:300,height:300,marginRight:"auto",marginLeft:"auto",marginTop:"10%",borderRadius:10},buttonText:{textAlign:"center"},imageDetail:{position:"absolute",height:"100vh",width:"100vw",left:0,top:0,backgroundColor:"#F0F0F0",marginTop:"10%"},clearBtnLayout:{position:"absolute",right:20,top:20},clearBtn:{width:"auto",height:"auto"},clearBtnText:{fontSize:20,textAlign:"center"},inputLayout:{width:"70%",marginTop:"10%",marginLeft:"auto",marginRight:"auto"},tag:{color:"#000000",opacity:.4,fontSize:14,lineHeight:17}}),H=n(95),M=n(44),J=n(327),Q=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],G=n(93),K=n.n(G);function X(){var e=K()(["\n  query Memes_By_AuthorId($userId: ID!) {\n    memesByAuthorId(userId: $userId) {\n      id\n      author {\n        id\n        name\n      }\n      tags\n      url\n      createTime\n      counter {\n        likeCount\n        dislikeCount\n      }\n    }\n  }\n"]);return X=function(){return e},e}function Y(){var e=K()(["\n  query Memes_By_Tag($tag: String!) {\n    memesByTag(tag: $tag) {\n      id\n      author {\n        id\n        name\n      }\n      tags\n      url\n      createTime\n      counter {\n        likeCount\n        dislikeCount\n      }\n    }\n  }\n"]);return Y=function(){return e},e}function Z(){var e=K()(["\n  query Current_User {\n    currentUser {\n      id\n      name\n    }\n  }\n"]);return Z=function(){return e},e}function ee(){var e=K()(["\n  query Popular_Tags {\n    popularTags\n  }\n"]);return ee=function(){return e},e}var te,ne=Object(s.gql)(ee()),ae=Object(s.gql)(Z()),re=Object(s.gql)(Y()),oe=Object(s.gql)(X()),le=n(485),ie=function(e){e.id;var t=e.customizedStyles,n=e.imageUrl,a=e.name;return l.a.createElement(U.a,{style:[ce.user,t?t.user:{}]},n?l.a.createElement(D.a,{source:{uri:n}}):l.a.createElement(le.a,{name:"user",size:36,color:"black"}),l.a.createElement(N.a,{style:ce.name},a))},ce=V.a.create({user:{display:"flex",flexDirection:"row",flex:1,margin:5},name:{margin:5,display:"flex",alignItems:"center"}}),ue=function(e){var t=e.id,n=(e.customizedStyles,e.imageUrl,e.name);return l.a.createElement(U.a,{style:se.container},l.a.createElement(ie,{id:t,name:n,customizedStyles:se}))},se=V.a.create({container:{display:"flex",flexDirection:"row",justifyContent:"center",backgroundColor:"white"},user:{display:"flex",flexDirection:"row",justifyContent:"center",flex:1,margin:5}}),me=function(e){e.navigation;var t,n=Object(o.useState)(null),a=v()(n,2),r=(a[0],a[1]),i=Object(s.useQuery)(ae),c=i.loading,u=i.data,m=Object(s.useQuery)(oe,{skip:!(null==u?void 0:u.currentUser),variables:{userId:null==u||null==(t=u.currentUser)?void 0:t.id}}),d=m.loading,f=m.data,g=d?[]:f?f.memesByAuthorId.map((function(e){return{id:e.id,tags:e.tags}})):[];return l.a.createElement(l.a.Fragment,null,c?l.a.createElement(U.a,{style:[fe.container,fe.horizontal]},l.a.createElement(H.a,{size:"large"})):l.a.createElement(ue,null==u?void 0:u.currentUser),d?l.a.createElement(U.a,{style:[fe.container,fe.horizontal]},l.a.createElement(H.a,{size:"large"})):l.a.createElement(z.a,{style:de.container},l.a.createElement(J.a,{itemDimension:100,data:g,style:V.a.flatten(de.gridView),fixed:!0,spacing:16,renderItem:function(e){var t=e.item,n=Q[Math.floor(Math.random()*Math.floor(Q.length))];return l.a.createElement(M.a,{onPress:function(){return r(t.id)}},l.a.createElement(U.a,{style:[de.itemContainer,{backgroundColor:n}]},l.a.createElement(N.a,{style:de.tags},t.tags.join(","))))}})))},de=V.a.create({container:{flex:1,marginTop:L.a.currentHeight||0,backgroundColor:"#ffffff"},gridView:{marginTop:10,flex:1},itemContainer:{justifyContent:"flex-end",borderRadius:5,padding:10,height:100},tags:{fontSize:16,color:"#fff",fontWeight:"600"},itemCode:{fontWeight:"600",fontSize:12,color:"#fff"}}),fe=V.a.create({container:{flex:1,justifyContent:"center"},horizontal:{flexDirection:"row",justifyContent:"space-around",padding:10}}),ge=n(66),pe=function(e){var t=e.showPoundSign,n=e.text,a=e.onPressCallback,r=void 0===a?function(){}:a;return l.a.createElement(U.a,null,l.a.createElement(N.a,{onPress:r},t?"#"+n:n))},he=function(e){var t=e.item,n=e.onPress,a=e.style,o=e.showPoundSign;return l.a.createElement(M.a,{onPress:n,style:[be.item,a]},l.a.createElement(pe,r()({style:be.title},t,{showPoundSign:o})))},ye=function(e){var t=e.hashtagList,n=e.showPoundSign,a=e.onSelectionCallBack,r=void 0===a?function(e){}:a,i=Object(o.useState)(null),c=v()(i,2),u=c[0],s=c[1];return 0===(null==t?void 0:t.length)?l.a.createElement(l.a.Fragment,null):l.a.createElement(z.a,null,l.a.createElement(ge.a,{style:be.list,horizontal:!0,data:t,renderItem:function(e){var t=e.item,a=t.id===u?"#E83468":"#FFFFFF";return l.a.createElement(he,{showPoundSign:n,item:t,onPress:function(){s(t.id),r(t)},style:{borderBottomWidth:"thick",borderBottomColor:a,backgroundColor:"#FFFFFF"}})},keyExtractor:function(e){return null==e?void 0:e.id},extraData:u}))},be=V.a.create({list:{height:50,flexGrow:0},item:{padding:20},title:{fontSize:16}});!function(e){e[e.Like=0]="Like",e[e.Dislike=1]="Dislike"}(te||(te={}));var Ee=n(489),we=function(e){var t=e.initialCount,n=e.feedbackType,a=Object(o.useState)(0),r=v()(a,2),i=r[0],c=r[1];return Object(o.useEffect)((function(){c(t||0)}),[t]),l.a.createElement(U.a,{style:ve.feedbackButton},l.a.createElement(Ee.a.Button,{name:n===te.Like?"thumbs-up":"thumbs-down",backgroundColor:"#FFFFFF",onPress:function(){return c(i+1)},size:24,color:"black"}),l.a.createElement(U.a,{style:ve.count},i))},ve=V.a.create({feedbackButton:{margin:10,padding:10,display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",borderColor:"#C4C4C4",borderWidth:3,borderRadius:50},count:{margin:10}}),xe=n(457),Ce=function(e){var t=e.creationTime,n=e.discussionCount,a=e.shareCount,r=t?new Date(t):new Date,i=Object(o.useState)(0),c=v()(i,2),u=c[0],s=c[1],m=Object(o.useState)(0),d=v()(m,2),f=d[0],g=d[1];return Object(o.useEffect)((function(){n&&s(n),a&&g(a)}),[n,a]),l.a.createElement(U.a,{style:Se.container},l.a.createElement(U.a,{style:Se.date},l.a.createElement(N.a,null,r.toLocaleString())),l.a.createElement(U.a,{style:Se.number},l.a.createElement(N.a,null," "+u+" "+(u>1?xe("Discussion"):"Discussion")+" "),l.a.createElement(N.a,null," "+f+" "+(f>1?xe("Share"):"Share")+" ")))},Se=V.a.create({container:{display:"flex",flexDirection:"column"},date:{display:"flex",flexDirection:"row-reverse",flex:1},number:{display:"flex",flexDirection:"row-reverse",flex:1}}),ke=function(e){e.imageUrl;return l.a.createElement(U.a,{style:Oe.container},l.a.createElement(le.a,{name:"picture",size:300,color:"black"}))},Oe=V.a.create({container:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"}}),je=function(e){var t,n,a,r,o,i,c,u,s,m=e.item,d=e.onPress;return l.a.createElement(M.a,{onPress:d,style:[Ie.item,Ie.background]},l.a.createElement(U.a,{style:Ie.memeHeaderInfo},l.a.createElement(ie,{id:null==m||null==(t=m.author)?void 0:t.id,name:null==m||null==(n=m.author)?void 0:n.name}),l.a.createElement(Ce,{creationTime:null!=(a=null==m?void 0:m.createTime)?a:""})),l.a.createElement(U.a,null,l.a.createElement(ke,{imageUrl:null==m?void 0:m.url})),l.a.createElement(U.a,null,l.a.createElement(ye,{hashtagList:null!=(r=null==m||null==(o=m.tags)?void 0:o.map((function(e){return{id:e,text:e}})))?r:[],showPoundSign:!1})),l.a.createElement(U.a,{style:Ie.feedbackButton},l.a.createElement(we,{initialCount:null!=(i=null==m||null==(c=m.counter)?void 0:c.likeCount)?i:0,feedbackType:te.Like}),l.a.createElement(we,{initialCount:null!=(u=null==m||null==(s=m.counter)?void 0:s.dislikeCount)?u:0,feedbackType:te.Dislike})))},Te=function(e){e.navigation;var t,n=Object(o.useState)(null),a=v()(n,2),r=a[0],i=a[1],c=Object(o.useState)(""),u=v()(c,2),m=u[0],d=u[1],f=Object(s.useQuery)(ne),g=f.loading,p=f.data,h=Object(s.useQuery)(re,{skip:!(null==p?void 0:p.popularTags),variables:{tag:m}}),y=(h.loading,h.data),b=g?[]:p.popularTags.map((function(e){return{id:e,text:e}}));Object(o.useEffect)((function(){!m&&(null==b?void 0:b.length)>0&&d(b[0].text)}));return g?l.a.createElement(U.a,{style:[Pe.container,Pe.horizontal]},l.a.createElement(H.a,{size:"large"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(ye,{hashtagList:b,showPoundSign:!1,onSelectionCallBack:function(e){d(e.text)}}),l.a.createElement(z.a,{style:Ie.container},l.a.createElement(ge.a,{data:null!=(t=null==y?void 0:y.memesByTag)?t:[],renderItem:function(e){var t=e.item;return l.a.createElement(je,{item:t,onPress:function(){return i(t.id)}})},keyExtractor:function(e){return e.id},extraData:r})))},Ie=V.a.create({background:{backgroundColor:"#ffffff"},container:{flex:1,marginTop:L.a.currentHeight||0},item:{padding:20,marginVertical:1,marginHorizontal:0,display:"flex"},memeHeaderInfo:{display:"flex",flex:1,flexDirection:"row"},feedbackButton:{display:"flex",flex:1,flexDirection:"row"}}),Pe=V.a.create({container:{flex:1,justifyContent:"center"},horizontal:{flexDirection:"row",justifyContent:"space-around",padding:10}}),Ae=Object(F.a)(),Be=Object(p.a)(),Fe=Object(p.a)(),De=Object(p.a)(),ze=function(){return l.a.createElement(Be.Navigator,null,l.a.createElement(Be.Screen,{name:"Topic",component:Te}))},Le=function(){return l.a.createElement(Fe.Navigator,null,l.a.createElement(Fe.Screen,{name:"Profile",component:me}))},Ve=function(){return l.a.createElement(De.Navigator,null,l.a.createElement(De.Screen,{name:"Compose",component:q}))},Ne=function(){return l.a.createElement(Ae.Navigator,null,l.a.createElement(Ae.Screen,{name:"Topic",component:ze}),l.a.createElement(Ae.Screen,{name:"Profile",component:Le}),l.a.createElement(Ae.Screen,{name:"Compose",component:Ve}))},Ue=n(46);function Re(){var e=K()(["\n    mutation login ($username: String!, $password: String!) {\n        login (username: $username, password: $password) {\n            user {\n                username\n                name\n                roles\n            }\n            token\n        }\n    }\n"]);return Re=function(){return e},e}function We(){var e=K()(["\n    mutation createUser ($userInfo: CreateUserInput!) {\n        createUser (userInfo: $userInfo) {\n            user {\n                username\n                name\n                roles\n            }\n            token\n        }\n    }\n"]);return We=function(){return e},e}var $e=Object(s.gql)(We()),qe=Object(s.gql)(Re()),_e=n(104),He=n(203),Me=function(e){e.navigation;var t=Object(s.useApolloClient)(),n=Object(o.useState)(""),a=v()(n,2),r=a[0],i=a[1],c=Object(o.useState)(""),u=v()(c,2),m=u[0],d=u[1],f=Object(o.useState)(""),g=v()(f,2),h=g[0],b=g[1],E=Object(o.useState)(0),w=v()(E,2),x=w[0],C=w[1],S=Object(o.useState)(0),k=v()(S,2),j=k[0],T=k[1],I=Object(o.useState)("test"),P=v()(I,2),B=P[0],F=P[1],z=Object(o.useState)(!1),L=v()(z,2),V=L[0],R=L[1],W=l.a.useContext(A).signIn;Object(o.useEffect)((function(){D.a.getSize(He,(function(e,t){C(e),T(t)}),(function(){}))}),[]);Object(p.a)();return l.a.createElement(U.a,{style:Je.container},l.a.createElement(_e.a,{transparent:!0,animationType:"fade",visible:V,style:Je.modal},l.a.createElement(U.a,{style:Je.centeredView},l.a.createElement(U.a,{style:Je.modalView},l.a.createElement(N.a,{style:Je.modalText},B),l.a.createElement(M.a,{style:Je.openButton,onPress:function(){R(!1)}},l.a.createElement(N.a,null,"\u95dc\u9589"))))),l.a.createElement(D.a,{source:He,style:{width:x,height:j}}),l.a.createElement(U.a,{style:Je.inputControl},l.a.createElement(U.a,{style:Je.inputView},l.a.createElement(Ue.a,{style:Je.inputText,placeholder:"Email",placeholderTextColor:"#A5A5A5",onChangeText:function(e){return i(e)}})),l.a.createElement(U.a,{style:Je.inputView},l.a.createElement(Ue.a,{secureTextEntry:!0,style:Je.inputText,placeholder:"Password",placeholderTextColor:"#A5A5A5",onChangeText:function(e){return d(e)}})),l.a.createElement(U.a,{style:Je.inputView},l.a.createElement(Ue.a,{style:Je.inputText,placeholder:"Name",placeholderTextColor:"#A5A5A5",onChangeText:function(e){return b(e)}})),l.a.createElement(M.a,{style:Je.button,onPress:function(e){var n,a,o,l,i,c,u;return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.awrap(t.mutate({mutation:$e,variables:{userInfo:{username:r,password:m,name:h}}}));case 3:return l=e.sent,i=l.data,e.next=7,y.a.awrap(O("userinfo",JSON.stringify(null!=(n=null==i?void 0:i.createUser)?n:null)));case 7:W({email:r,password:m,token:null!=(a=null==i||null==(o=i.createUser)?void 0:o.token)?a:null}),F("\u8a3b\u518a\u6210\u529f"),R(!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),F(null!=(c=null==(u=e.t0)?void 0:u.message)?c:JSON.stringify(e.t0)),R(!0),console.log(e.t0);case 17:case"end":return e.stop()}}),null,null,[[0,12]],Promise)}},l.a.createElement(N.a,{style:Je.loginText},"\u8a3b\u518a"))))},Je=V.a.create({container:{backgroundColor:"white",flex:1,alignItems:"center"},inputControl:{width:"100%",flex:1,alignItems:"center"},inputView:{width:"30%",minWidth:300,marginVertical:5},inputText:{height:50,borderWidth:0,borderBottomWidth:1},forgot:{color:"#A5A5A5"},button:{width:"30%",minWidth:300,backgroundColor:"#E83468",borderRadius:25,height:50,alignItems:"center",justifyContent:"center",marginVertical:10},loginText:{color:"white"},centeredView:{width:"100%",height:"100%",backgroundColor:"white",margin:0,flex:1,justifyContent:"center",alignItems:"center"},modal:{width:"100%",height:"100%",backgroundColor:"white",margin:0,justifyContent:"center",alignItems:"center"},modalView:{width:"100%",height:"100%",justifyContent:"center",margin:20,backgroundColor:"white",borderRadius:20,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},openButton:{backgroundColor:"#2296F3",borderRadius:20,padding:10,elevation:2},modalText:{marginBottom:15,textAlign:"center"}}),Qe=n(203),Ge=function(e){var t=e.navigation,n=Object(s.useApolloClient)(),a=Object(o.useState)(""),r=v()(a,2),i=r[0],c=r[1],u=Object(o.useState)(""),m=v()(u,2),d=m[0],f=m[1],g=Object(o.useState)(0),h=v()(g,2),b=h[0],E=h[1],w=Object(o.useState)(0),x=v()(w,2),C=x[0],S=x[1],k=Object(o.useState)("test"),j=v()(k,2),T=j[0],I=j[1],P=Object(o.useState)(!1),B=v()(P,2),F=B[0],z=B[1],L=l.a.useContext(A).signIn;Object(o.useEffect)((function(){D.a.getSize(Qe,(function(e,t){E(e),S(t)}),(function(){}))}),[]);Object(p.a)();return l.a.createElement(U.a,{style:Ke.container},l.a.createElement(_e.a,{transparent:!0,animationType:"fade",visible:F,style:Ke.modal},l.a.createElement(U.a,{style:Ke.centeredView},l.a.createElement(U.a,{style:Ke.modalView},l.a.createElement(N.a,{style:Ke.modalText},T),l.a.createElement(M.a,{style:Ke.openButton,onPress:function(){z(!1)}},l.a.createElement(N.a,null,"\u95dc\u9589"))))),l.a.createElement(D.a,{source:Qe,style:{width:b,height:C}}),l.a.createElement(U.a,{style:Ke.inputControl},l.a.createElement(U.a,{style:Ke.inputView},l.a.createElement(Ue.a,{style:Ke.inputText,placeholder:"Email",placeholderTextColor:"#A5A5A5",onChangeText:function(e){return c(e)}})),l.a.createElement(U.a,{style:Ke.inputView},l.a.createElement(Ue.a,{secureTextEntry:!0,style:Ke.inputText,placeholder:"Password",placeholderTextColor:"#A5A5A5",onChangeText:function(e){return f(e)}})),l.a.createElement(M.a,{style:Ke.button,onPress:function(e){var a,r,o,l,c,u,s;return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.awrap(n.mutate({mutation:qe,variables:{username:i,password:d}}));case 3:return l=e.sent,c=l.data,console.log(c),e.next=8,y.a.awrap(O("userinfo",JSON.stringify(null!=(a=null==c?void 0:c.login)?a:null)));case 8:I("\u767b\u5165\u6210\u529f"),z(!0),L({email:i,password:d,token:null!=(r=null==c||null==(o=c.login)?void 0:o.token)?r:null}),t.navigate("Home"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),I(null!=(u=null==(s=e.t0)?void 0:s.message)?u:JSON.stringify(e.t0)),z(!0),console.log(e.t0);case 19:case"end":return e.stop()}}),null,null,[[0,14]],Promise)}},l.a.createElement(N.a,{style:Ke.loginText},"\u767b\u5165")),l.a.createElement(M.a,{style:Ke.button,onPress:function(e){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.navigate("Sign Up");case 1:case"end":return e.stop()}}),null,null,null,Promise)}},l.a.createElement(N.a,{style:Ke.loginText},"\u8a3b\u518a")),l.a.createElement(M.a,null,l.a.createElement(N.a,{style:Ke.forgot},"Forgot your password?"))))},Ke=V.a.create({container:{backgroundColor:"white",flex:1,alignItems:"center"},inputControl:{width:"100%",flex:1,alignItems:"center"},inputView:{width:"30%",minWidth:300,marginVertical:5},inputText:{height:50,borderWidth:0,borderBottomWidth:1},forgot:{color:"#A5A5A5"},button:{width:"30%",minWidth:300,backgroundColor:"#E83468",borderRadius:25,height:50,alignItems:"center",justifyContent:"center",marginVertical:10},loginText:{color:"white"},centeredView:{width:"100%",height:"100%",backgroundColor:"white",margin:0,flex:1,justifyContent:"center",alignItems:"center"},modal:{width:"100%",height:"100%",backgroundColor:"white",margin:0,justifyContent:"center",alignItems:"center"},modalView:{width:"100%",height:"100%",justifyContent:"center",margin:20,backgroundColor:"white",borderRadius:20,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},openButton:{backgroundColor:"#2296F3",borderRadius:20,padding:10,elevation:2},modalText:{marginBottom:15,textAlign:"center"}}),Xe=(n(203),function(e){e.navigation;var t=Object(p.a)();return l.a.createElement(t.Navigator,{initialRouteName:"Sign In"},l.a.createElement(t.Screen,{name:"Sign In",component:Ge}),l.a.createElement(t.Screen,{name:"Sign Up",component:Me}))}),Ye=function(){return l.a.createElement(U.a,null,l.a.createElement(N.a,null,"Loading..."))},Ze=function(){var e=Object(p.a)(),t=l.a.useContext(I);return l.a.createElement(g.a,null,l.a.createElement(e.Navigator,{headerMode:"none"},t.isLoading?l.a.createElement(e.Screen,{name:"Splash",component:Ye}):null==t.userToken?l.a.createElement(e.Screen,{name:"SignIn",component:Xe,options:{title:"Sign in",animationTypeForReplace:t.isSignout?"pop":"push",headerShown:!1}}):l.a.createElement(e.Screen,{name:"Home",component:Ne})))};function et(){return o.createElement(f.ApplicationProvider,r()({},i,{theme:i.light}),o.createElement(s.ApolloProvider,{client:d},o.createElement(B,null,o.createElement(Ze,null))))}},333:function(e,t,n){e.exports=n(476)}},[[333,1,2]]]);
//# sourceMappingURL=app.b8c9fae6.chunk.js.map